<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CIT Confess Cloud</title>

    <!-- Google Fonts: Outfit for modern, clean look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>

    <!-- Canvas for extra background effects -->
    <canvas id="cosmosCanvas"></canvas>

    <div class="app-container">

        <!-- Header / Nav -->
        <header class="glass-header">
            <div class="logo">CIT Confess Cloud â˜ï¸</div>
            <div class="header-right">
                <button id="themeToggle" class="icon-btn" onclick="toggleTheme()"
                    title="Toggle Light/Dark Mode">ğŸŒ“</button>
                <div class="view-toggle">
                    <button id="btnBubble" class="active" onclick="showBubbleView()">ğŸ«§ Bubbles</button>
                    <button id="btnList" onclick="showListView()">ğŸ“‹ Feed</button>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main>

            <!-- Toggle Button (Now for both desktop & mobile) -->
            <button id="formToggleBtn" class="form-toggle-btn" onclick="toggleForm()">âœï¸ Make a Confession</button>

            <!-- Confession Form (Floating) -->
            <div id="form-container" class="glass-panel slide-in">
                <h2>Make a Confession</h2>
                <div class="input-group">
                    <input type="text" id="displayName" placeholder="Public Display Name">
                    <input type="text" id="authorName" placeholder="Real Name (Hidden Forever)">
                </div>
                <div class="tag-selector">
                    <label>Tag your thought:</label>
                    <div class="tag-chips" id="tagChips">
                        <span class="tag-chip active" onclick="selectTag(this)">General</span>
                        <span class="tag-chip" onclick="selectTag(this)">Crush</span>
                        <span class="tag-chip" onclick="selectTag(this)">Regret</span>
                        <span class="tag-chip" onclick="selectTag(this)">Funny</span>
                        <span class="tag-chip" onclick="selectTag(this)">Secret</span>
                        <span class="tag-chip" onclick="selectTag(this)">Rant</span>
                    </div>
                </div>
                <textarea id="confessionText" placeholder="What's weighing on your mind?"></textarea>
                <button class="submit-btn" onclick="submitConfession()">Release into the Cloud ğŸš€</button>
                <div
                    style="margin-top: 15px; font-size: 0.8rem; color: var(--text-muted); text-align: center; border-top: 1px solid var(--glass-border); padding-top: 10px;">
                    âš ï¸ Use this website responsibly. Do not misuse it. The use of bad words is strictly restricted.
                </div>
            </div>

            <!-- Bubble View Container -->
            <div id="bubble-container" class="view-section"></div>

            <!-- List View Container -->
            <div id="list-container" class="view-section" style="display:none;">
                <div class="list-header">
                    <div class="search-bar">
                        <input type="text" id="searchInput" placeholder="Search confessions..."
                            onkeyup="filterConfessions()">
                        <span class="search-icon">ğŸ”</span>
                    </div>
                    <div class="tag-filters" id="tagFilters">
                        <button class="filter-tag active" onclick="filterByTag('All')">All</button>
                        <button class="filter-tag" onclick="filterByTag('Crush')">Crush</button>
                        <button class="filter-tag" onclick="filterByTag('Regret')">Regret</button>
                        <button class="filter-tag" onclick="filterByTag('Funny')">Funny</button>
                        <button class="filter-tag" onclick="filterByTag('Rant')">Rant</button>
                    </div>
                    <div class="list-controls">
                        <button class="filter-btn active" onclick="loadList('latest')">Latest</button>
                        <button class="filter-btn" onclick="loadList('trending')">Trending</button>
                    </div>
                </div>
                <div id="confession-list"></div>
            </div>

        </main>
    </div>

    <!-- ğŸ’¬ Comment Modal -->
    <div id="commentModal" class="modal-overlay">
        <div class="modal-glass">
            <div class="modal-header">
                <h3>Comments</h3>
                <span class="close-btn" onclick="closeComments()">&times;</span>
            </div>

            <div id="modalConfessionText"
                style="padding: 20px; font-style: italic; border-bottom: 1px solid var(--glass-border); color: #fff;">
            </div>

            <div id="commentsList" class="comments-scroll"></div>

            <div class="comment-input-area">
                <textarea id="commentInput" placeholder="Add your thoughts..."></textarea>
                <button onclick="postComment()">Post</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/antigravity.js') }}"></script>
    <script src="{{ url_for('static', filename='js/cosmos.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

</body>

</html>